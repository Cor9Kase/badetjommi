(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{285:(e,t,r)=>{"use strict";r.d(t,{$:()=>o,r:()=>d});var a=r(5155),s=r(2115),n=r(9708),i=r(2085),l=r(9434);let d=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:o=!1,...c}=e,u=o?n.DX:"button";return(0,a.jsx)(u,{className:(0,l.cn)(d({variant:s,size:i,className:r})),ref:t,...c})});o.displayName="Button"},286:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(157).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},320:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(157).A)("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},594:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(157).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},820:(e,t,r)=>{"use strict";r.d(t,{RealTimeFeed:()=>P});var a=r(5155),s=r(1394),n=r(6695),i=r(285),l=r(3152),d=r(8681),o=r(9274),c=r(9545),u=r(157);let m=(0,u.A)("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]),p=(0,u.A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),f=(0,u.A)("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]),h=(0,u.A)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);var g=r(286),v=r(594),x=r(320),y=r(3896),k=r(6766),b=r(6874),j=r.n(b),w=r(2115),N=r(3655),A="horizontal",S=["horizontal","vertical"],E=w.forwardRef((e,t)=>{var r;let{decorative:s,orientation:n=A,...i}=e,l=(r=n,S.includes(r))?n:A;return(0,a.jsx)(N.sG.div,{"data-orientation":l,...s?{role:"none"}:{"aria-orientation":"vertical"===l?l:void 0,role:"separator"},...i,ref:t})});E.displayName="Separator";var M=r(9434);let T=w.forwardRef((e,t)=>{let{className:r,orientation:s="horizontal",decorative:n=!0,...i}=e;return(0,a.jsx)(E,{ref:t,decorative:n,orientation:s,className:(0,M.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",r),...i})});T.displayName=E.displayName;var I=r(7481),C=r(7600),D=r(6104),R=r(5317),_=r(3013),L=r(9323);let O=e=>{let{icon:t,count:r,label:s,onClick:n,disabled:l}=e;return(0,a.jsxs)(i.$,{variant:"ghost",size:"sm",className:"flex items-center gap-1 text-muted-foreground hover:text-accent-foreground",onClick:n,disabled:l,children:[(0,a.jsx)(t,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:r}),(0,a.jsx)("span",{className:"sr-only",children:s})]})};function P(){let{toast:e}=(0,I.dj)(),{currentUser:t,userProfile:r,loading:u}=(0,C.A)(),[b,N]=(0,w.useState)([]),[A,S]=(0,w.useState)({}),[E,M]=(0,w.useState)(!0);(0,w.useEffect)(()=>{M(!0);let t=(0,R.rJ)(D.db,"baths"),r=(0,R.P)(t,(0,R.My)("createdAt","desc")),a=(0,R.aQ)(r,async e=>{let t=[],r=new Set;if(e.forEach(e=>{let a=e.data();t.push({...a,id:e.id}),"planned"===a.type&&a.attendees.forEach(e=>r.add(e))}),N(t),r.size>0){let e={};for(let t of Array.from(r))if(!A[t]){let r=(0,R.H9)(D.db,"users",t),a=await (0,R.x7)(r);if(a.exists()){let r=a.data();e[t]={name:r.name,avatarUrl:r.avatarUrl}}}S(t=>({...t,...e}))}M(!1)},t=>{console.error("Error fetching feed items: ",t),e({variant:"destructive",title:"Feil",description:"Kunne ikke laste feed."}),M(!1)});return()=>a()},[e]);let P=async(r,a)=>{if(!t)return void e({variant:"destructive",title:"Logg Inn",description:"Du m\xe5 v\xe6re logget inn for \xe5 melde deg p\xe5."});let s=(0,R.H9)(D.db,"baths",r);try{await (0,R.mZ)(s,{attendees:(0,R.hq)(t.uid)}),e({title:"P\xe5meldt!",description:'Du er n\xe5 p\xe5meldt "'.concat(a,'".'),variant:"default"})}catch(t){console.error("Error signing up for bath: ",t),e({variant:"destructive",title:"Feil",description:"Kunne ikke melde deg p\xe5."})}},B=async(r,a)=>{if(!t)return void e({variant:"destructive",title:"Logg Inn",description:"Du m\xe5 v\xe6re logget inn."});let s=(0,R.H9)(D.db,"baths",r);try{await (0,R.mZ)(s,{attendees:(0,R.C3)(t.uid)}),e({title:"Avmeldt!",description:'Du er n\xe5 avmeldt "'.concat(a,'".'),variant:"default"})}catch(t){console.error("Error signing off from bath: ",t),e({variant:"destructive",title:"Feil",description:"Kunne ikke melde deg av."})}};if(u||E)return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-200px)]",children:[(0,a.jsx)(l.A,{className:"h-12 w-12 animate-spin text-primary mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Laster inn badefeed..."})]});if(0===b.length)return(0,a.jsxs)("div",{className:"text-center text-muted-foreground py-8",children:[(0,a.jsx)(d.A,{className:"mx-auto h-12 w-12 mb-4 text-primary"}),(0,a.jsx)("p",{className:"text-lg",children:"Ingen plask eller planer logget enn\xe5."}),(0,a.jsx)("p",{children:"Bli den f\xf8rste til \xe5 dykke i og logge badet ditt eller planlegg et fellesbad!"})]});let H=e=>{try{return(0,_.GP)(new Date(e),"d. MMMM yyyy",{locale:L.nb})}catch(t){return e}};return(0,a.jsx)("div",{className:"space-y-6",children:b.map(e=>(0,a.jsxs)(n.Zp,{className:"overflow-hidden shadow-md hover:shadow-lg transition-shadow duration-300 bg-card",children:[(0,a.jsx)(n.aR,{className:"p-4",children:(0,a.jsx)("div",{className:"flex items-center space-x-3",children:(0,a.jsx)(j(),{href:"/profil/".concat(e.userId),passHref:!0,legacyBehavior:!0,children:(0,a.jsxs)("a",{className:"flex items-center space-x-3 group",children:[(0,a.jsxs)(s.eu,{className:"h-11 w-11 border-2 border-primary/50",children:[(0,a.jsx)(s.BK,{src:e.userAvatar||"https://picsum.photos/seed/".concat(e.userId,"/40/40"),alt:e.userName,"data-ai-hint":"brukeravatar"}),(0,a.jsx)(s.q5,{children:e.userName.substring(0,2).toUpperCase()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(n.ZB,{className:"text-lg font-semibold group-hover:underline",children:e.userName}),(0,a.jsxs)(n.BT,{className:"text-xs text-muted-foreground",children:["planned"===e.type?"Planla et bad for ":"",H(e.date)," kl. ",e.time,e.location&&" @ ".concat(e.location)]})]})]})})})}),(0,a.jsxs)(n.Wu,{className:"p-4 pt-0",children:["logged"===e.type&&e.imageUrl&&(0,a.jsx)("div",{className:"mb-4 rounded-lg overflow-hidden aspect-video relative",children:(0,a.jsx)(k.default,{src:e.imageUrl,alt:"Bad av ".concat(e.userName),fill:!0,className:"object-cover","data-ai-hint":"naturskj\xf8nt vann"})}),"logged"===e.type&&(0,a.jsxs)("div",{className:"space-y-1 mb-3",children:[e.comments&&(0,a.jsx)("p",{className:"text-sm",children:e.comments}),e.waterTemperature&&(0,a.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[(0,a.jsx)(o.A,{className:"h-4 w-4 mr-1.5 text-primary"}),(0,a.jsxs)("span",{children:["Temperaturf\xf8lelse: ",e.waterTemperature]})]})]}),"planned"===e.type&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("h3",{className:"font-semibold text-md flex items-center",children:[(0,a.jsx)(c.A,{className:"h-5 w-5 mr-2 text-primary"})," ",e.description]}),e.location&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Sted: ",e.location]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Antall p\xe5meldte: ",e.attendees.length]}),e.attendees.length>0&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Deltakere: ",e.attendees.map(e=>{var t;return(null==(t=A[e])?void 0:t.name)||"Laster..."}).join(", ")]})]})]}),(0,a.jsx)(T,{}),(0,a.jsx)(n.wL,{className:"p-2 flex justify-between items-center bg-secondary/30",children:"logged"===e.type?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(O,{icon:m,count:e.reactions.thumbsUp,label:"Tommel Opp"}),(0,a.jsx)(O,{icon:p,count:e.reactions.heart,label:"Hjerte"}),(0,a.jsx)(O,{icon:f,count:e.reactions.party,label:"Fest"})]}),(0,a.jsxs)(i.$,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-accent-foreground",children:[(0,a.jsx)(h,{className:"h-4 w-4 mr-1"}),e.commentCount," Kommentarer "]})]}):(0,a.jsxs)("div",{className:"flex w-full justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-2"}),(0,a.jsxs)("span",{children:[e.attendees.length," p\xe5meldt"]})]}),t&&e.userId===t.uid?(0,a.jsxs)(i.$,{size:"sm",variant:"outline",disabled:!0,children:[(0,a.jsx)(v.A,{className:"h-4 w-4 mr-2"})," Du arrangerer"]}):t&&e.attendees.includes(t.uid)?(0,a.jsxs)(i.$,{size:"sm",variant:"outline",onClick:()=>B(e.id,e.description),children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-2"})," Meld deg av"]}):(0,a.jsxs)(i.$,{size:"sm",onClick:()=>P(e.id,e.description),disabled:!t,children:[(0,a.jsx)(y.A,{className:"h-4 w-4 mr-2"})," Meld deg p\xe5"]})]})})]},e.id))})}},1394:(e,t,r)=>{"use strict";r.d(t,{BK:()=>d,eu:()=>l,q5:()=>o});var a=r(5155),s=r(2115),n=r(4011),i=r(9434);let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.bL,{ref:t,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...s})});l.displayName=n.bL.displayName;let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n._V,{ref:t,className:(0,i.cn)("aspect-square h-full w-full",r),...s})});d.displayName=n._V.displayName;let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.H4,{ref:t,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...s})});o.displayName=n.H4.displayName},1414:(e,t,r)=>{"use strict";e.exports=r(2436)},2353:(e,t,r)=>{Promise.resolve().then(r.bind(r,820))},2436:(e,t,r)=>{"use strict";var a=r(2115),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=a.useState,i=a.useEffect,l=a.useLayoutEffect,d=a.useDebugValue;function o(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!s(e,r)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),a=n({inst:{value:r,getSnapshot:t}}),s=a[0].inst,c=a[1];return l(function(){s.value=r,s.getSnapshot=t,o(s)&&c({inst:s})},[e,r,t]),i(function(){return o(s)&&c({inst:s}),e(function(){o(s)&&c({inst:s})})},[e]),d(r),r};t.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:c},3896:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(157).A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},4011:(e,t,r)=>{"use strict";r.d(t,{H4:()=>N,_V:()=>w,bL:()=>j});var a=r(2115),s=r(6081),n=r(9033),i=r(2712),l=r(3655),d=r(1414);function o(){return()=>{}}var c=r(5155),u="Avatar",[m,p]=(0,s.A)(u),[f,h]=m(u),g=a.forwardRef((e,t)=>{let{__scopeAvatar:r,...s}=e,[n,i]=a.useState("idle");return(0,c.jsx)(f,{scope:r,imageLoadingStatus:n,onImageLoadingStatusChange:i,children:(0,c.jsx)(l.sG.span,{...s,ref:t})})});g.displayName=u;var v="AvatarImage",x=a.forwardRef((e,t)=>{let{__scopeAvatar:r,src:s,onLoadingStatusChange:u=()=>{},...m}=e,p=h(v,r),f=function(e,t){let{referrerPolicy:r,crossOrigin:s}=t,n=(0,d.useSyncExternalStore)(o,()=>!0,()=>!1),l=a.useRef(null),c=n?(l.current||(l.current=new window.Image),l.current):null,[u,m]=a.useState(()=>b(c,e));return(0,i.N)(()=>{m(b(c,e))},[c,e]),(0,i.N)(()=>{let e=e=>()=>{m(e)};if(!c)return;let t=e("loaded"),a=e("error");return c.addEventListener("load",t),c.addEventListener("error",a),r&&(c.referrerPolicy=r),"string"==typeof s&&(c.crossOrigin=s),()=>{c.removeEventListener("load",t),c.removeEventListener("error",a)}},[c,s,r]),u}(s,m),g=(0,n.c)(e=>{u(e),p.onImageLoadingStatusChange(e)});return(0,i.N)(()=>{"idle"!==f&&g(f)},[f,g]),"loaded"===f?(0,c.jsx)(l.sG.img,{...m,ref:t,src:s}):null});x.displayName=v;var y="AvatarFallback",k=a.forwardRef((e,t)=>{let{__scopeAvatar:r,delayMs:s,...n}=e,i=h(y,r),[d,o]=a.useState(void 0===s);return a.useEffect(()=>{if(void 0!==s){let e=window.setTimeout(()=>o(!0),s);return()=>window.clearTimeout(e)}},[s]),d&&"loaded"!==i.imageLoadingStatus?(0,c.jsx)(l.sG.span,{...n,ref:t}):null});function b(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}k.displayName=y;var j=g,w=x,N=k},6104:(e,t,r)=>{"use strict";let a;r.d(t,{IG:()=>c,db:()=>o,j2:()=>d});var s=r(3915),n=r(3004),i=r(5317),l=r(858);a=(0,s.Dk)().length?(0,s.Sx)():(0,s.Wp)({apiKey:"AIzaSyC2bFtXORXF-3w1_MrSiRw2E2K4uNBLBjM",authDomain:"arctic-splash-challenge.firebaseapp.com",projectId:"arctic-splash-challenge",storageBucket:"arctic-splash-challenge.firebasestorage.app",messagingSenderId:"224667120742",appId:"1:224667120742:web:88c710436311b3c8fb69a7"});let d=(0,n.xI)(a),o=(0,i.aU)(a),c=(0,l.c7)(a)},6695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>i,aR:()=>l,wL:()=>u});var a=r(5155),s=r(2115),n=r(9434);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});l.displayName="CardHeader";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});d.displayName="CardTitle";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});o.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},7481:(e,t,r)=>{"use strict";r.d(t,{dj:()=>m});var a=r(2115);let s=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],o={toasts:[]};function c(e){o=l(o,e),d.forEach(e=>{e(o)})}function u(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function m(){let[e,t]=a.useState(o);return a.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},7600:(e,t,r)=>{"use strict";r.d(t,{A:()=>u,AuthProvider:()=>c});var a=r(5155),s=r(2115),n=r(3004),i=r(6104),l=r(5317),d=r(7481);let o=(0,s.createContext)(void 0),c=e=>{let{children:t}=e,[r,c]=(0,s.useState)(null),[u,m]=(0,s.useState)(null),[p,f]=(0,s.useState)(!0),[h,g]=(0,s.useState)(null),{toast:v}=(0,d.dj)();(0,s.useEffect)(()=>{let e=(0,n.hg)(i.j2,async e=>{f(!0),c(e),e?await x(e.uid)||(g("Brukerprofilen din mangler eller kunne ikke lastes. Vennligst pr\xf8v \xe5 logge ut og inn igjen, eller kontakt support hvis problemet vedvarer."),v({variant:"destructive",title:"Problem med Profil",description:"Vi fant ikke profildataene dine. Pr\xf8v \xe5 logge ut og inn.",duration:1e4}),m(null)):(m(null),g(null)),f(!1)});return()=>e()},[]);let x=async e=>{g(null);try{let t=(0,l.H9)(i.db,"users",e),r=await (0,l.x7)(t);if(!r.exists())return console.warn("No user profile found for UID: ".concat(e,". This might happen if Firestore document creation failed after auth user creation.")),m(null),null;{let e=r.data();return m(e),e}}catch(e){return console.error("Error fetching user profile:",e),g("Kunne ikke hente brukerprofil. Sjekk internettforbindelsen din."),v({variant:"destructive",title:"Profilfeil",description:"Kunne ikke laste brukerprofil. Sjekk tilkoblingen din."}),m(null),null}finally{}},y=async(e,t,r)=>{if(!e.email)return g("Auth email is required to create a profile."),v({variant:"destructive",title:"Intern Feil",description:"N\xf8dvendig autentiseringsinformasjon (e-post) mangler for profilopprettelse."}),null;let a={uid:e.uid,email:e.email,username:t,name:t,bio:"",avatarUrl:"",targetBaths:r,currentBaths:0};try{return await (0,l.BN)((0,l.H9)(i.db,"users",e.uid),a),m(a),a}catch(e){return console.error("Error creating user profile in Firestore: ",e),g("Kunne ikke opprette profil i databasen: ".concat(e.message)),v({variant:"destructive",title:"Databasefeil",description:"Kunne ikke lagre brukerprofilen. Pr\xf8v igjen eller kontakt support."}),null}},k=async(e,t)=>{let{username:r,email:a,...s}=t;r&&u&&r!==u.username&&console.warn("Attempted to change login username (immutable field) during profile update. This is not allowed."),a&&u&&a!==u.email&&console.warn("Attempted to change internal auth email during profile update. This is not allowed.");try{let t=(0,l.H9)(i.db,"users",e);await (0,l.BN)(t,s,{merge:!0}),m(e=>e?{...e,...s}:null)}catch(e){console.error("Error updating user profile: ",e),g("Kunne ikke oppdatere profilen: ".concat(e.message)),v({variant:"destructive",title:"Oppdateringsfeil",description:"Kunne ikke lagre profilendringer."})}},b=async()=>{f(!0);try{await (0,n.CI)(i.j2),c(null),m(null),g(null),v({title:"Logget Ut",description:"Du har blitt logget ut."})}catch(e){console.error("Error signing out: ",e),g("Kunne ikke logge ut: ".concat(e.message)),v({variant:"destructive",title:"Utloggingsfeil",description:"En feil oppstod under utlogging."})}finally{f(!1)}};return(0,a.jsx)(o.Provider,{value:{currentUser:r,userProfile:u,loading:p,error:h,setCurrentUser:c,setUserProfile:m,setError:g,logout:b,fetchUserProfile:x,createUserProfile:y,updateUserProfile:k},children:t})},u=()=>{let e=(0,s.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8681:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(157).A)("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]])},9274:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(157).A)("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]])},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(2596),s=r(9688);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},9545:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(157).A)("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[992,73,740,874,614,766,441,684,358],()=>t(2353)),_N_E=e.O()}]);