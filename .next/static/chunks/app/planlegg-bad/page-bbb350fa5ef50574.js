(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[59],{286:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(157).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},1479:(e,t,a)=>{"use strict";a.d(t,{PlanBathForm:()=>T});var s=a(5155),n=a(221),r=a(2177),l=a(1153),i=a(285),d=a(7759),o=a(2523),c=a(8539),m=a(5511),u=a(4636),h=a(9434),x=a(3013),p=a(9323),g=a(3152),f=a(157);let v=(0,f.A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var j=a(1920);let y=(0,f.A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var b=a(3662),w=a(286);let N=(0,f.A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var k=a(7481),M=a(2115),D=a(7600),_=a(6104),A=a(5317),S=a(5695);let P=l.Ik({date:l.p6({required_error:"Dato for badet er p\xe5krevd."}).min(new Date(new Date().setHours(0,0,0,0)),{message:"Dato kan ikke v\xe6re i fortiden."}),time:l.Yj().regex(/^([01]\d|2[0-3]):([0-5]\d)$/,{message:"Ugyldig tidsformat. Bruk TT:MM."}),location:l.Yj().min(1,{message:"Sted er p\xe5krevd."}),description:l.Yj().min(1,{message:"Beskrivelse/Tittel for badet er p\xe5krevd."}),invitedGuestsText:l.Yj().optional()});function T(){let{toast:e}=(0,k.dj)(),{currentUser:t,userProfile:a,loading:l}=(0,D.A)(),f=(0,S.useRouter)(),[T,C]=(0,M.useState)(!1),[z,V]=(0,M.useState)(void 0),B=(0,r.mN)({resolver:(0,n.u)(P),defaultValues:{date:new Date,time:new Date().toLocaleTimeString("nb-NO",{hour:"2-digit",minute:"2-digit"}),location:"",description:"",invitedGuestsText:"tar du med kaffe?"},mode:"onChange"});async function H(n){if(!t||!a)return void e({variant:"destructive",title:"Feil",description:"Du m\xe5 v\xe6re logget inn."});C(!0);let r={type:"planned",userId:t.uid,userName:a.name,userAvatar:a.avatarUrl||"",date:(0,x.GP)(n.date,"yyyy-MM-dd"),time:n.time,location:n.location,description:n.description,attendees:[t.uid],createdAt:Date.now()};try{await (0,A.gS)((0,A.rJ)(_.db,"baths"),r),e({title:"Bad Planlagt!",description:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("span",{children:["Tittel: ",n.description]}),(0,s.jsxs)("span",{children:["Dato: ",(0,x.GP)(n.date,"PPP",{locale:p.nb})," kl. ",n.time]}),(0,s.jsxs)("span",{children:["Sted: ",n.location]})]}),variant:"default"});let t=new Date,a=new Date(t);a.setDate(t.getDate()+1);let l=new Date;30>l.getMinutes()?l.setMinutes(30):(l.setHours(l.getHours()+1),l.setMinutes(0));let i=l.toLocaleTimeString("nb-NO",{hour:"2-digit",minute:"2-digit"});B.reset({date:a,time:i,location:"",description:"",invitedGuestsText:"tar du med kaffe?"}),f.push("/")}catch(t){console.error("Error planning bath: ",t),e({variant:"destructive",title:"Planlegging feilet",description:"En feil oppstod."})}finally{C(!1)}}return((0,M.useEffect)(()=>{l||t||(e({title:"Vennligst logg inn",description:"Du m\xe5 v\xe6re logget inn for \xe5 planlegge et bad.",variant:"destructive"}),f.push("/login"))},[t,l,f,e]),(0,M.useEffect)(()=>{let e=new Date,t=new Date(e);t.setDate(e.getDate()+1),V(t),B.setValue("date",t,{shouldValidate:!0});let a=new Date;30>a.getMinutes()?a.setMinutes(30):(a.setHours(a.getHours()+1),a.setMinutes(0)),a.setSeconds(0),a.setMilliseconds(0);let s=a.toLocaleTimeString("nb-NO",{hour:"2-digit",minute:"2-digit"});B.setValue("time",s,{shouldValidate:!0})},[B]),l||!z)?(0,s.jsxs)("div",{className:"flex justify-center items-center p-8",children:[(0,s.jsx)(g.A,{className:"h-8 w-8 animate-spin"})," Laster..."]}):t?(0,s.jsx)(d.lV,{...B,children:(0,s.jsxs)("form",{onSubmit:B.handleSubmit(H),className:"space-y-6",children:[(0,s.jsx)(d.zB,{control:B.control,name:"description",render:e=>{let{field:t}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsxs)(d.lR,{className:"flex items-center",children:[(0,s.jsx)(v,{className:"mr-2 h-4 w-4"})," Tittel / Kort Beskrivelse"]}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(o.p,{placeholder:"F.eks. Morgenbad Sognsvann, Isbade-utfordring",...t})}),(0,s.jsx)(d.C5,{})]})}}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(d.zB,{control:B.control,name:"date",render:e=>{let{field:t}=e;return(0,s.jsxs)(d.eI,{className:"flex flex-col",children:[(0,s.jsxs)(d.lR,{className:"mb-1 flex items-center",children:[(0,s.jsx)(j.A,{className:"mr-2 h-4 w-4"}),"Dato"]}),(0,s.jsxs)(u.AM,{children:[(0,s.jsx)(u.Wv,{asChild:!0,children:(0,s.jsx)(d.MJ,{children:(0,s.jsxs)(i.$,{variant:"outline",className:(0,h.cn)("w-full pl-3 text-left font-normal",!t.value&&"text-muted-foreground"),children:[t.value?(0,x.GP)(t.value,"PPP",{locale:p.nb}):(0,s.jsx)("span",{children:"Velg en dato"}),(0,s.jsx)(j.A,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,s.jsx)(u.hl,{className:"w-auto p-0",align:"start",children:(0,s.jsx)(m.V,{mode:"single",selected:t.value,onSelect:t.onChange,disabled:e=>e<new Date(new Date().setHours(0,0,0,0)),initialFocus:!!z,defaultMonth:z,locale:p.nb})})]}),(0,s.jsx)(d.C5,{})]})}}),(0,s.jsx)(d.zB,{control:B.control,name:"time",render:e=>{let{field:t}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsxs)(d.lR,{className:"flex items-center",children:[(0,s.jsx)(y,{className:"mr-2 h-4 w-4"}),"Tidspunkt"]}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(o.p,{type:"time",...t})}),(0,s.jsx)(d.C5,{})]})}})]}),(0,s.jsx)(d.zB,{control:B.control,name:"location",render:e=>{let{field:t}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsxs)(d.lR,{className:"flex items-center",children:[(0,s.jsx)(b.A,{className:"mr-2 h-4 w-4"})," Sted"]}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(o.p,{placeholder:"F.eks., Sognsvann, Oslo",...t})}),(0,s.jsx)(d.C5,{})]})}}),(0,s.jsx)(d.zB,{control:B.control,name:"invitedGuestsText",render:e=>{var t;let{field:a}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsxs)(d.lR,{className:"flex items-center",children:[(0,s.jsx)(w.A,{className:"mr-2 h-4 w-4"})," Ekstra Detaljer (Valgfritt notat)"]}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(c.T,{placeholder:"F.eks. tar du med kaffe?",className:"resize-none",...a,value:null!=(t=a.value)?t:""})}),(0,s.jsx)(d.C5,{})]})}}),(0,s.jsxs)(i.$,{type:"submit",className:"w-full md:w-auto bg-accent hover:bg-accent/90 text-accent-foreground",disabled:T||l||!t,children:[T?(0,s.jsx)(g.A,{className:"mr-2 h-5 w-5 animate-spin"}):(0,s.jsx)(N,{className:"mr-2 h-5 w-5"}),T?"Planlegger...":"Planlegg Bad"]})]})}):(0,s.jsx)("div",{className:"p-4 text-center text-destructive",children:"Du m\xe5 v\xe6re logget inn for \xe5 planlegge et bad."})}},4636:(e,t,a)=>{"use strict";a.d(t,{AM:()=>i,Wv:()=>d,hl:()=>o});var s=a(5155),n=a(2115),r=a(547),l=a(9434);let i=r.bL,d=r.l9,o=n.forwardRef((e,t)=>{let{className:a,align:n="center",sideOffset:i=4,...d}=e;return(0,s.jsx)(r.ZL,{children:(0,s.jsx)(r.UC,{ref:t,align:n,sideOffset:i,className:(0,l.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...d})})});o.displayName=r.UC.displayName},5511:(e,t,a)=>{"use strict";a.d(t,{V:()=>o});var s=a(5155);a(2115);var n=a(965),r=a(3158),l=a(3900),i=a(9434),d=a(285);function o(e){let{className:t,classNames:a,showOutsideDays:o=!0,...c}=e;return(0,s.jsx)(l.hv,{showOutsideDays:o,className:(0,i.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,i.cn)((0,d.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,i.cn)((0,d.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{className:t,...a}=e;return(0,s.jsx)(n.A,{className:(0,i.cn)("h-4 w-4",t),...a})},IconRight:e=>{let{className:t,...a}=e;return(0,s.jsx)(r.A,{className:(0,i.cn)("h-4 w-4",t),...a})}},...c})}o.displayName="Calendar"},9445:(e,t,a)=>{Promise.resolve().then(a.bind(a,1479))}},e=>{var t=t=>e(e.s=t);e.O(0,[992,73,740,614,569,464,133,202,441,684,358],()=>t(9445)),_N_E=e.O()}]);