(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[248],{127:(e,t,r)=>{Promise.resolve().then(r.bind(r,7602))},285:(e,t,r)=>{"use strict";r.d(t,{$:()=>c,r:()=>d});var s=r(5155),a=r(2115),n=r(9708),i=r(2085),l=r(9434);let d=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:c=!1,...o}=e,u=c?n.DX:"button";return(0,s.jsx)(u,{className:(0,l.cn)(d({variant:a,size:i,className:r})),ref:t,...o})});c.displayName="Button"},1394:(e,t,r)=>{"use strict";r.d(t,{BK:()=>d,eu:()=>l,q5:()=>c});var s=r(5155),a=r(2115),n=r(4011),i=r(9434);let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.bL,{ref:t,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...a})});l.displayName=n.bL.displayName;let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n._V,{ref:t,className:(0,i.cn)("aspect-square h-full w-full",r),...a})});d.displayName=n._V.displayName;let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.H4,{ref:t,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...a})});c.displayName=n.H4.displayName},5845:(e,t,r)=>{"use strict";r.d(t,{R:()=>u});var s=r(5155),a=r(2115),n=r(5863),i=r(9434);let l=a.forwardRef((e,t)=>{let{className:r,value:a,...l}=e;return(0,s.jsx)(n.bL,{ref:t,className:(0,i.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",r),...l,children:(0,s.jsx)(n.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});l.displayName=n.bL.displayName;var d=r(1394),c=r(6874),o=r.n(c);function u(e){let{userId:t,userName:r,userAvatar:a,currentBaths:n,targetBaths:c,className:u}=e,m=Math.min(n/c*100,100),f=()=>(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[a?(0,s.jsxs)(d.eu,{className:"h-10 w-10",children:[(0,s.jsx)(d.BK,{src:a,alt:r,"data-ai-hint":"brukeravatar"}),(0,s.jsx)(d.q5,{children:r.substring(0,2).toUpperCase()})]}):(0,s.jsx)(d.eu,{className:"h-10 w-10 bg-primary text-primary-foreground flex items-center justify-center",children:(0,s.jsx)(d.q5,{children:r.substring(0,2).toUpperCase()})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium leading-none",children:r}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[n," / ",c," bad"]})]})]});return(0,s.jsxs)("div",{className:(0,i.cn)("flex flex-col space-y-3 p-1",u),children:[t?(0,s.jsx)(o(),{href:"/profil/".concat(t),passHref:!0,legacyBehavior:!0,children:(0,s.jsx)("a",{className:"hover:opacity-80 transition-opacity",children:(0,s.jsx)(f,{})})}):(0,s.jsx)(f,{}),(0,s.jsx)(l,{value:m,"aria-label":"".concat(r,"s badeprogresjon"),className:"h-3 [&>div]:bg-accent"}),n>=c&&(0,s.jsx)("p",{className:"text-xs text-center font-semibold text-accent",children:"\uD83C\uDF89 M\xe5l Oppn\xe5dd! \uD83C\uDF89"})]})}},6104:(e,t,r)=>{"use strict";let s;r.d(t,{IG:()=>o,db:()=>c,j2:()=>d});var a=r(3915),n=r(3004),i=r(5317),l=r(858);s=(0,a.Dk)().length?(0,a.Sx)():(0,a.Wp)({apiKey:"AIzaSyC2bFtXORXF-3w1_MrSiRw2E2K4uNBLBjM",authDomain:"arctic-splash-challenge.firebaseapp.com",projectId:"arctic-splash-challenge",storageBucket:"arctic-splash-challenge.firebasestorage.app",messagingSenderId:"224667120742",appId:"1:224667120742:web:88c710436311b3c8fb69a7"});let d=(0,n.xI)(s),c=(0,i.aU)(s),o=(0,l.c7)(s)},6695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>i,aR:()=>l,wL:()=>u});var s=r(5155),a=r(2115),n=r(9434);let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});i.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...a})});l.displayName="CardHeader";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});d.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})});c.displayName="CardDescription";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...a})});o.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...a})});u.displayName="CardFooter"},7481:(e,t,r)=>{"use strict";r.d(t,{dj:()=>m});var s=r(2115);let a=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],c={toasts:[]};function o(e){c=l(c,e),d.forEach(e=>{e(c)})}function u(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>o({type:"DISMISS_TOAST",toastId:r});return o({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function m(){let[e,t]=s.useState(c);return s.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},7600:(e,t,r)=>{"use strict";r.d(t,{A:()=>u,AuthProvider:()=>o});var s=r(5155),a=r(2115),n=r(3004),i=r(6104),l=r(5317),d=r(7481);let c=(0,a.createContext)(void 0),o=e=>{let{children:t}=e,[r,o]=(0,a.useState)(null),[u,m]=(0,a.useState)(null),[f,p]=(0,a.useState)(!0),[h,x]=(0,a.useState)(null),{toast:g}=(0,d.dj)();(0,a.useEffect)(()=>{let e=(0,n.hg)(i.j2,async e=>{p(!0),o(e),e?await v(e.uid)||(x("Brukerprofilen din mangler eller kunne ikke lastes. Vennligst pr\xf8v \xe5 logge ut og inn igjen, eller kontakt support hvis problemet vedvarer."),g({variant:"destructive",title:"Problem med Profil",description:"Vi fant ikke profildataene dine. Pr\xf8v \xe5 logge ut og inn.",duration:1e4}),m(null)):(m(null),x(null)),p(!1)});return()=>e()},[]);let v=async e=>{x(null);try{let t=(0,l.H9)(i.db,"users",e),r=await (0,l.x7)(t);if(!r.exists())return console.warn("No user profile found for UID: ".concat(e,". This might happen if Firestore document creation failed after auth user creation.")),m(null),null;{let e=r.data();return m(e),e}}catch(e){return console.error("Error fetching user profile:",e),x("Kunne ikke hente brukerprofil. Sjekk internettforbindelsen din."),g({variant:"destructive",title:"Profilfeil",description:"Kunne ikke laste brukerprofil. Sjekk tilkoblingen din."}),m(null),null}finally{}},j=async(e,t,r)=>{if(!e.email)return x("Auth email is required to create a profile."),g({variant:"destructive",title:"Intern Feil",description:"N\xf8dvendig autentiseringsinformasjon (e-post) mangler for profilopprettelse."}),null;let s={uid:e.uid,email:e.email,username:t,name:t,bio:"",avatarUrl:"",targetBaths:r,currentBaths:0};try{return await (0,l.BN)((0,l.H9)(i.db,"users",e.uid),s),m(s),s}catch(e){return console.error("Error creating user profile in Firestore: ",e),x("Kunne ikke opprette profil i databasen: ".concat(e.message)),g({variant:"destructive",title:"Databasefeil",description:"Kunne ikke lagre brukerprofilen. Pr\xf8v igjen eller kontakt support."}),null}},b=async(e,t)=>{let{username:r,email:s,...a}=t;r&&u&&r!==u.username&&console.warn("Attempted to change login username (immutable field) during profile update. This is not allowed."),s&&u&&s!==u.email&&console.warn("Attempted to change internal auth email during profile update. This is not allowed.");try{let t=(0,l.H9)(i.db,"users",e);await (0,l.BN)(t,a,{merge:!0}),m(e=>e?{...e,...a}:null)}catch(e){console.error("Error updating user profile: ",e),x("Kunne ikke oppdatere profilen: ".concat(e.message)),g({variant:"destructive",title:"Oppdateringsfeil",description:"Kunne ikke lagre profilendringer."})}},N=async()=>{p(!0);try{await (0,n.CI)(i.j2),o(null),m(null),x(null),g({title:"Logget Ut",description:"Du har blitt logget ut."})}catch(e){console.error("Error signing out: ",e),x("Kunne ikke logge ut: ".concat(e.message)),g({variant:"destructive",title:"Utloggingsfeil",description:"En feil oppstod under utlogging."})}finally{p(!1)}};return(0,s.jsx)(c.Provider,{value:{currentUser:r,userProfile:u,loading:f,error:h,setCurrentUser:o,setUserProfile:m,setError:x,logout:N,fetchUserProfile:v,createUserProfile:j,updateUserProfile:b},children:t})},u=()=>{let e=(0,a.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7602:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>D});var s=r(5155),a=r(1394),n=r(6695),i=r(285),l=r(3152),d=r(8681),c=r(9545),o=r(8328),u=r(3662),m=r(4063),f=r(9274),p=r(286),h=r(594),x=r(320),g=r(3896),v=r(6766),j=r(5845),b=r(7481),N=r(2115),y=r(5695),w=r(7600),k=r(6104),A=r(5317),S=r(3013),T=r(9323);function D(){let e=(0,y.useParams)(),t=null==e?void 0:e.userId,{toast:r}=(0,b.dj)(),{currentUser:D,userProfile:E,loading:I}=(0,w.A)(),B=(0,y.useRouter)(),[C,_]=(0,N.useState)(null),[R,U]=(0,N.useState)([]),[M,O]=(0,N.useState)({}),[P,K]=(0,N.useState)(!0),[F,H]=(0,N.useState)(!0);(0,N.useEffect)(()=>{t&&(K(!0),(async()=>{let e=(0,A.H9)(k.db,"users",t),s=await (0,A.x7)(e);s.exists()?_(s.data()):(r({variant:"destructive",title:"Bruker Ikke Funnet",description:"Kunne ikke finne profilen."}),_(null)),K(!1)})())},[t,r]),(0,N.useEffect)(()=>{if(t){H(!0);let e=(0,A.rJ)(k.db,"baths"),s=(0,A.P)(e,(0,A._M)("userId","==",t),(0,A.My)("createdAt","desc")),a=(0,A.aQ)(s,async e=>{let t=[],r=new Set;if(e.forEach(e=>{let s=e.data();t.push({...s,id:e.id}),"planned"===s.type&&s.attendees.forEach(e=>r.add(e))}),U(t),r.size>0){let e={};for(let t of Array.from(r))if(!M[t]){let r=(0,A.H9)(k.db,"users",t),s=await (0,A.x7)(r);if(s.exists()){let r=s.data();e[t]={name:r.name,avatarUrl:r.avatarUrl}}}O(t=>({...t,...e}))}H(!1)},e=>{console.error("Error fetching bath log:",e),r({variant:"destructive",title:"Feil",description:"Kunne ikke laste aktivitetslogg."}),H(!1)});return()=>a()}},[t,r]);let L=async(e,t)=>{if(!D)return void r({variant:"destructive",title:"Logg Inn",description:"Du m\xe5 v\xe6re logget inn for \xe5 melde deg p\xe5."});let s=(0,A.H9)(k.db,"baths",e);try{await (0,A.mZ)(s,{attendees:(0,A.hq)(D.uid)}),O(e=>({...e,[D.uid]:{name:(null==E?void 0:E.name)||"Deg",avatarUrl:null==E?void 0:E.avatarUrl}})),r({title:"P\xe5meldt!",description:'Du er n\xe5 p\xe5meldt "'.concat(t,'".')})}catch(e){console.error("Error signing up for bath: ",e),r({variant:"destructive",title:"Feil",description:"Kunne ikke melde deg p\xe5."})}},Z=async(e,t)=>{if(!D)return void r({variant:"destructive",title:"Logg Inn",description:"Du m\xe5 v\xe6re logget inn."});let s=(0,A.H9)(k.db,"baths",e);try{await (0,A.mZ)(s,{attendees:(0,A.C3)(D.uid)}),r({title:"Avmeldt!",description:'Du er n\xe5 avmeldt "'.concat(t,'".')})}catch(e){console.error("Error signing off from bath: ",e),r({variant:"destructive",title:"Feil",description:"Kunne ikke melde deg av."})}},z=e=>{try{return(0,S.GP)(new Date(e),"d. MMMM yyyy",{locale:T.nb})}catch(t){return e}};return P||I?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-200px)]",children:[(0,s.jsx)(l.A,{className:"h-12 w-12 animate-spin text-primary mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Laster profil..."})]}):C?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(n.Zp,{className:"shadow-lg",children:[(0,s.jsx)(n.aR,{className:"text-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsxs)(a.eu,{className:"h-24 w-24 mb-4 border-4 border-primary shadow-md",children:[(0,s.jsx)(a.BK,{src:C.avatarUrl||"https://picsum.photos/seed/".concat(C.uid,"/100/100"),alt:C.name,"data-ai-hint":"brukerprofil avatar"}),(0,s.jsx)(a.q5,{children:C.name.substring(0,2).toUpperCase()})]}),(0,s.jsx)(n.ZB,{className:"text-3xl font-bold",children:C.name}),C.bio&&(0,s.jsx)(n.BT,{className:"mt-1 text-md",children:C.bio})]})}),(0,s.jsx)(n.Wu,{children:(0,s.jsx)(j.R,{userName:C.name,userAvatar:C.avatarUrl,currentBaths:C.currentBaths,targetBaths:C.targetBaths})})]}),(0,s.jsxs)(n.Zp,{className:"shadow-lg",children:[(0,s.jsx)(n.aR,{children:(0,s.jsxs)(n.ZB,{className:"text-2xl font-semibold flex items-center",children:[(0,s.jsx)(d.A,{className:"mr-3 h-7 w-7 text-primary"}),"Aktivitetslogg"]})}),(0,s.jsx)(n.Wu,{children:F?(0,s.jsxs)("div",{className:"flex justify-center items-center p-8",children:[(0,s.jsx)(l.A,{className:"h-8 w-8 animate-spin"})," Laster logg..."]}):R&&R.length>0?(0,s.jsx)("div",{className:"space-y-4",children:R.map(e=>(0,s.jsxs)(n.Zp,{className:"overflow-hidden bg-card",children:[(0,s.jsxs)(n.aR,{className:"p-4 bg-secondary/20",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:["planned"===e.type?(0,s.jsx)(c.A,{className:"h-4 w-4 text-accent"}):(0,s.jsx)(o.A,{className:"h-4 w-4"}),(0,s.jsxs)("span",{children:[z(e.date)," kl. ",e.time]})]}),e.location&&(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground mt-1",children:[(0,s.jsx)(u.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:e.location})]}),"planned"===e.type&&(0,s.jsx)("p",{className:"text-sm font-medium text-accent mt-1",children:e.description})]}),(0,s.jsxs)(n.Wu,{className:"p-4",children:["logged"===e.type&&e.imageUrl&&(0,s.jsx)("div",{className:"mb-3 rounded-md overflow-hidden aspect-video relative w-full max-w-xs mx-auto",children:(0,s.jsx)(v.default,{src:e.imageUrl,alt:"Bad fra ".concat(e.date),fill:!0,className:"object-cover","data-ai-hint":"bilde badelogg"})}),"logged"===e.type&&(0,s.jsxs)("div",{className:"space-y-1 text-sm",children:[e.comments&&(0,s.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,s.jsx)(m.A,{className:"h-4 w-4 mt-0.5 shrink-0 text-primary"}),(0,s.jsx)("p",{children:e.comments})]}),e.waterTemperature&&(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[(0,s.jsx)(f.A,{className:"h-4 w-4 shrink-0"}),(0,s.jsxs)("span",{children:["Temperaturf\xf8lelse: ",e.waterTemperature]})]}),!e.comments&&!e.imageUrl&&!e.waterTemperature&&(0,s.jsx)("p",{className:"italic text-muted-foreground",children:"Ingen detaljer lagt til for dette badet."})]}),"planned"===e.type&&(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(p.A,{className:"h-4 w-4 mr-2 text-muted-foreground"}),(0,s.jsxs)("span",{children:[e.attendees.length," p\xe5meldt."]})]}),e.attendees.length>0&&(0,s.jsxs)("p",{className:"text-muted-foreground",children:["Deltakere: ",e.attendees.map(e=>{var t;return(null==(t=M[e])?void 0:t.name)||"..."}).join(", ")]}),D&&D.uid===e.userId?(0,s.jsxs)(i.$,{size:"sm",variant:"outline",className:"mt-2 w-full sm:w-auto",disabled:!0,children:[(0,s.jsx)(h.A,{className:"mr-2 h-4 w-4"})," Du arrangerer"]}):D&&e.attendees.includes(D.uid)?(0,s.jsxs)(i.$,{size:"sm",variant:"outline",className:"mt-2 w-full sm:w-auto",onClick:()=>Z(e.id,e.description),children:[(0,s.jsx)(x.A,{className:"mr-2 h-4 w-4"})," Meld deg av"]}):(0,s.jsxs)(i.$,{size:"sm",className:"mt-2 w-full sm:w-auto",onClick:()=>L(e.id,e.description),disabled:!D,children:[(0,s.jsx)(g.A,{className:"mr-2 h-4 w-4"})," Meld deg p\xe5"]})]})]})]},e.id))}):(0,s.jsx)("p",{className:"text-muted-foreground",children:"Denne brukeren har ingen loggf\xf8rte bad eller planlagte aktiviteter enn\xe5."})})]})]}):(0,s.jsxs)("div",{className:"text-center py-10",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold",children:"Bruker ikke funnet"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Denne profilen eksisterer ikke eller kunne ikke lastes."}),(0,s.jsx)(i.$,{onClick:()=>B.push("/"),className:"mt-4",children:"Tilbake til Feed"})]})}},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(2596),a=r(9688);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,73,740,874,614,766,958,441,684,358],()=>t(127)),_N_E=e.O()}]);