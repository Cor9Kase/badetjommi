"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[202],{285:(e,t,r)=>{r.d(t,{$:()=>d,r:()=>l});var n=r(5155),i=r(2115),a=r(9708),o=r(2085),s=r(9434);let l=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=i.forwardRef((e,t)=>{let{className:r,variant:i,size:o,asChild:d=!1,...u}=e,c=d?a.DX:"button";return(0,n.jsx)(c,{className:(0,s.cn)(l({variant:i,size:o,className:r})),ref:t,...u})});d.displayName="Button"},2523:(e,t,r)=>{r.d(t,{p:()=>o});var n=r(5155),i=r(2115),a=r(9434);let o=i.forwardRef((e,t)=>{let{className:r,type:i,...o}=e;return(0,n.jsx)("input",{type:i,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...o})});o.displayName="Input"},5057:(e,t,r)=>{r.d(t,{J:()=>d});var n=r(5155),i=r(2115),a=r(968),o=r(2085),s=r(9434);let l=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)(a.b,{ref:t,className:(0,s.cn)(l(),r),...i})});d.displayName=a.b.displayName},6104:(e,t,r)=>{let n;r.d(t,{IG:()=>u,db:()=>d,j2:()=>l});var i=r(3915),a=r(3004),o=r(5317),s=r(858);n=(0,i.Dk)().length?(0,i.Sx)():(0,i.Wp)({apiKey:"AIzaSyC2bFtXORXF-3w1_MrSiRw2E2K4uNBLBjM",authDomain:"arctic-splash-challenge.firebaseapp.com",projectId:"arctic-splash-challenge",storageBucket:"arctic-splash-challenge.firebasestorage.app",messagingSenderId:"224667120742",appId:"1:224667120742:web:88c710436311b3c8fb69a7"});let l=(0,a.xI)(n),d=(0,o.aU)(n),u=(0,s.c7)(n)},7481:(e,t,r)=>{r.d(t,{dj:()=>f});var n=r(2115);let i=0,a=new Map,o=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},s=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?o(r):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function u(e){d=s(d,e),l.forEach(e=>{e(d)})}function c(e){let{...t}=e,r=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>u({type:"DISMISS_TOAST",toastId:r});return u({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||n()}}}),{id:r,dismiss:n,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=n.useState(d);return n.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}},7600:(e,t,r)=>{r.d(t,{A:()=>c,AuthProvider:()=>u});var n=r(5155),i=r(2115),a=r(3004),o=r(6104),s=r(5317),l=r(7481);let d=(0,i.createContext)(void 0),u=e=>{let{children:t}=e,[r,u]=(0,i.useState)(null),[c,f]=(0,i.useState)(null),[p,m]=(0,i.useState)(!0),[g,b]=(0,i.useState)(null),{toast:v}=(0,l.dj)();(0,i.useEffect)(()=>{let e=(0,a.hg)(o.j2,async e=>{m(!0),u(e),e?await h(e.uid)||(b("Brukerprofilen din mangler eller kunne ikke lastes. Vennligst pr\xf8v \xe5 logge ut og inn igjen, eller kontakt support hvis problemet vedvarer."),v({variant:"destructive",title:"Problem med Profil",description:"Vi fant ikke profildataene dine. Pr\xf8v \xe5 logge ut og inn.",duration:1e4}),f(null)):(f(null),b(null)),m(!1)});return()=>e()},[]);let h=async e=>{b(null);try{let t=(0,s.H9)(o.db,"users",e),r=await (0,s.x7)(t);if(!r.exists())return console.warn("No user profile found for UID: ".concat(e,". This might happen if Firestore document creation failed after auth user creation.")),f(null),null;{let e=r.data();return f(e),e}}catch(e){return console.error("Error fetching user profile:",e),b("Kunne ikke hente brukerprofil. Sjekk internettforbindelsen din."),v({variant:"destructive",title:"Profilfeil",description:"Kunne ikke laste brukerprofil. Sjekk tilkoblingen din."}),f(null),null}finally{}},x=async(e,t,r)=>{if(!e.email)return b("Auth email is required to create a profile."),v({variant:"destructive",title:"Intern Feil",description:"N\xf8dvendig autentiseringsinformasjon (e-post) mangler for profilopprettelse."}),null;let n={uid:e.uid,email:e.email,username:t,name:t,bio:"",avatarUrl:"",targetBaths:r,currentBaths:0};try{return await (0,s.BN)((0,s.H9)(o.db,"users",e.uid),n),f(n),n}catch(e){return console.error("Error creating user profile in Firestore: ",e),b("Kunne ikke opprette profil i databasen: ".concat(e.message)),v({variant:"destructive",title:"Databasefeil",description:"Kunne ikke lagre brukerprofilen. Pr\xf8v igjen eller kontakt support."}),null}},y=async(e,t)=>{let{username:r,email:n,...i}=t;r&&c&&r!==c.username&&console.warn("Attempted to change login username (immutable field) during profile update. This is not allowed."),n&&c&&n!==c.email&&console.warn("Attempted to change internal auth email during profile update. This is not allowed.");try{let t=(0,s.H9)(o.db,"users",e);await (0,s.BN)(t,i,{merge:!0}),f(e=>e?{...e,...i}:null)}catch(e){console.error("Error updating user profile: ",e),b("Kunne ikke oppdatere profilen: ".concat(e.message)),v({variant:"destructive",title:"Oppdateringsfeil",description:"Kunne ikke lagre profilendringer."})}},k=async()=>{m(!0);try{await (0,a.CI)(o.j2),u(null),f(null),b(null),v({title:"Logget Ut",description:"Du har blitt logget ut."})}catch(e){console.error("Error signing out: ",e),b("Kunne ikke logge ut: ".concat(e.message)),v({variant:"destructive",title:"Utloggingsfeil",description:"En feil oppstod under utlogging."})}finally{m(!1)}};return(0,n.jsx)(d.Provider,{value:{currentUser:r,userProfile:c,loading:p,error:g,setCurrentUser:u,setUserProfile:f,setError:b,logout:k,fetchUserProfile:h,createUserProfile:x,updateUserProfile:y},children:t})},c=()=>{let e=(0,i.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7759:(e,t,r)=>{r.d(t,{C5:()=>h,MJ:()=>b,Rr:()=>v,eI:()=>m,lR:()=>g,lV:()=>d,zB:()=>c});var n=r(5155),i=r(2115),a=r(9708),o=r(2177),s=r(9434),l=r(5057);let d=o.Op,u=i.createContext({}),c=e=>{let{...t}=e;return(0,n.jsx)(u.Provider,{value:{name:t.name},children:(0,n.jsx)(o.xI,{...t})})},f=()=>{let e=i.useContext(u),t=i.useContext(p),{getFieldState:r,formState:n}=(0,o.xW)(),a=r(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:s}=t;return{id:s,name:e.name,formItemId:"".concat(s,"-form-item"),formDescriptionId:"".concat(s,"-form-item-description"),formMessageId:"".concat(s,"-form-item-message"),...a}},p=i.createContext({}),m=i.forwardRef((e,t)=>{let{className:r,...a}=e,o=i.useId();return(0,n.jsx)(p.Provider,{value:{id:o},children:(0,n.jsx)("div",{ref:t,className:(0,s.cn)("space-y-2",r),...a})})});m.displayName="FormItem";let g=i.forwardRef((e,t)=>{let{className:r,...i}=e,{error:a,formItemId:o}=f();return(0,n.jsx)(l.J,{ref:t,className:(0,s.cn)(a&&"text-destructive",r),htmlFor:o,...i})});g.displayName="FormLabel";let b=i.forwardRef((e,t)=>{let{...r}=e,{error:i,formItemId:o,formDescriptionId:s,formMessageId:l}=f();return(0,n.jsx)(a.DX,{ref:t,id:o,"aria-describedby":i?"".concat(s," ").concat(l):"".concat(s),"aria-invalid":!!i,...r})});b.displayName="FormControl";let v=i.forwardRef((e,t)=>{let{className:r,...i}=e,{formDescriptionId:a}=f();return(0,n.jsx)("p",{ref:t,id:a,className:(0,s.cn)("text-sm text-muted-foreground",r),...i})});v.displayName="FormDescription";let h=i.forwardRef((e,t)=>{var r;let{className:i,children:a,...o}=e,{error:l,formMessageId:d}=f(),u=l?String(null!=(r=null==l?void 0:l.message)?r:""):a;return u?(0,n.jsx)("p",{ref:t,id:d,className:(0,s.cn)("text-sm font-medium text-destructive",i),...o,children:u}):null});h.displayName="FormMessage"},8539:(e,t,r)=>{r.d(t,{T:()=>o});var n=r(5155),i=r(2115),a=r(9434);let o=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...i})});o.displayName="Textarea"},9434:(e,t,r)=>{r.d(t,{cn:()=>a});var n=r(2596),i=r(9688);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.QP)((0,n.$)(t))}}}]);